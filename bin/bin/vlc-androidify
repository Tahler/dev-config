#!/bin/bash

v_codec="h264"
v_bitrate="500"
v_width="480"
v_height="360"
a_codec="mp3"
a_bitrate="128"
a_channels="2"
a_samplerate="44100"
output_ext="mp4"
mux="mp4"
vlc="$(which vlc)"
input_ext="mp4"

for f in *$input_ext; do
  $vlc -I dummy -vvv "$f" --sout "#transcode{vcodec=$v_codec,vb=$v_bitrate,scale=1,width=$v_width,height=$v_height,profile=baseline,acodec=$a_codec,ab=$a_bitrate,channels=$a_channels,samplerate=$a_samplerate}:standard{access=file,mux=$mux,dst=\"../$f\"}" vlc://quit
done
